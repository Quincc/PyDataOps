# Итоговое домашнее задание по дисциплине "Python для инженерии данных"

Проект представляет собой автоматизированную систему для генерации, репликации данных и построения аналитических витрин. Система разработана с использованием Python и инструментов для обработки данных.

## Структура проекта

Проект состоит из следующих основных компонентов:

1. **Генерация данных**:
   - Скрипты `data_generation.py` и `tables_generation_postgres.py` создают структуру базы данных PostgreSQL и заполняют её тестовыми данными.
   - Скрипт `tables_generation_mysql.py` создаёт структуру базы данных MySQL для репликации данных.

2. **Репликация данных**:
   - Скрипт `data_replication.py` выполняет репликацию данных из PostgreSQL в MySQL с использованием Airflow.

3. **Аналитические витрины**:
   - Скрипты `user_activity.py` и `sales_category.py` создают аналитические витрины в базе данных MySQL на основе реплицированных данных.

## Установка и настройка

### Необходимые зависимости

- Python 3.8+
- PostgreSQL
- MySQL
- Apache Airflow
- Дополнительные Python-библиотеки (указаны в `requirements.txt`):
  ```
  pandas
  psycopg2
  mysql-connector-python
  airflow
  pyspark
  ```

### Шаги настройки

1. Установите PostgreSQL и MySQL.
2. Настройте базы данных PostgreSQL и MySQL, используя скрипты `tables_generation_postgres.py` и `tables_generation_mysql.py`.
3. Установите Apache Airflow и настройте его для выполнения DAG-ов.
4. Установите зависимости проекта из файла `requirements.txt`:
   ```bash
   pip install -r requirements.txt
   ```
5. Запустите скрипты генерации данных:
   ```bash
   python data_generation.py
   ```
6. Настройте DAG для репликации данных и аналитических витрин в Apache Airflow.

## Описание аналитических витрин

### Витрина активности пользователей

**Описание:**
Анализ поведения пользователей на основе заказов.

**Поля:**
- `user_id` — Идентификатор пользователя.
- `first_name` — Имя пользователя.
- `last_name` — Фамилия пользователя.
- `status` — Статус заказа.
- `order_count` — Количество заказов.
- `total_spent` — Общая сумма затрат.

### Витрина продаж по категориям

**Описание:**
Анализ продаж товаров по категориям.

**Поля:**
- `category_id` — Идентификатор категории.
- `name` — Название категории.
- `total_quantity_sold` — Общее количество проданных единиц.
- `total_sales` — Общая сумма продаж.

## Использование

1. Запустите скрипт генерации данных для PostgreSQL.
   ```bash
   python data_generation.py
   ```
2. Настройте DAG для выполнения репликации данных с помощью Airflow.
3. Выполните скрипты для построения аналитических витрин.
   ```bash
   python user_activity.py
   python sales_category.py
   ```

## Стек технологий

- **PostgreSQL** — СУБД для исходных данных.
- **MySQL** — СУБД для реплицированных данных.
- **Apache Airflow** — Оркестрация процессов.
- **Python** — Основной язык разработки.

## Авторы

Проект выполнен в рамках итогового задания по дисциплине "Python для инженерии данных".
